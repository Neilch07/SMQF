# SMQF æ–‡ä»¶å¤¹æ•´ç†æ€»ç»“æŠ¥å‘Š

**æ•´ç†æ—¥æœŸ**: 2025-11-25
**æ•´ç†äººå‘˜**: AI Assistant
**è€—æ—¶**: ~5åˆ†é’Ÿ

---

## ğŸ“Š æ•´ç†å‰åå¯¹æ¯”

### Beforeï¼ˆæ•´ç†å‰ï¼‰ï¼š

```
SMQF/
â”œâ”€â”€ backtest_strategy.py
â”œâ”€â”€ chenhan_factor_test.py       âŒ é‡å¤
â”œâ”€â”€ compare_leakage_fix.py       âŒ å·²å®Œæˆä»»åŠ¡
â”œâ”€â”€ create_factors.py            â†’ ç§»åˆ° scripts/
â”œâ”€â”€ list_factors.py              â†’ ç§»åˆ° scripts/
â”œâ”€â”€ model_train_optimized.py     âœ… ä¿ç•™
â”œâ”€â”€ model_train.py               âŒ è¢«ä¼˜åŒ–ç‰ˆæ›¿ä»£
â”œâ”€â”€ numexpr.py                   âœ… ä¿ç•™
â”œâ”€â”€ rolling_backtest.py          âœ… ä¿ç•™
â”œâ”€â”€ test_all_factors_simple.py   â†’ ç§»åˆ° tests/
â”œâ”€â”€ test_amount_factor.py        â†’ ç§»åˆ° tests/
â”œâ”€â”€ test_factor.py               âŒ é‡å¤
â”œâ”€â”€ test_factors.py              âŒ è¿‡æ—¶
â”œâ”€â”€ test_single_factor.py        â†’ ç§»åˆ° tests/
â”œâ”€â”€ OPTIMIZATION_REPORT.md       â†’ ç§»åˆ° docs/
â”œâ”€â”€ QUICK_START_GUIDE.md         â†’ ç§»åˆ° docs/
â”œâ”€â”€ COMPARISON_SUMMARY.md        â†’ ç§»åˆ° docs/
â”œâ”€â”€ BACKTEST_README.md           â†’ ç§»åˆ° docs/
â”œâ”€â”€ README_model_train.md        â†’ ç§»åˆ° docs/
â””â”€â”€ cleanup_useless_files.sh     â†’ ç§»åˆ° scripts/

âš ï¸ é—®é¢˜ï¼š
- 14ä¸ªPythonæ–‡ä»¶æ‚ä¹±æ— ç« 
- 5ä¸ªMarkdownæ–‡æ¡£æ•£è½å„å¤„
- æµ‹è¯•æ–‡ä»¶ã€å·¥å…·è„šæœ¬æ··åœ¨ä¸€èµ·
- æ— ä¸»READMEè¯´æ˜
```

### Afterï¼ˆæ•´ç†åï¼‰ï¼š

```
SMQF/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                    â­ æ–°å»ºï¼ä¸»æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ¯ Core Scripts (5 files)
â”‚   â”œâ”€â”€ model_train_optimized.py   â­ ä¸»è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ backtest_strategy.py       ç­–ç•¥å›æµ‹
â”‚   â”œâ”€â”€ rolling_backtest.py        æ»šåŠ¨å›æµ‹
â”‚   â””â”€â”€ numexpr.py                 å…¼å®¹æ€§å¤„ç†
â”‚
â”œâ”€â”€ ğŸ“ scripts/ (3 files)          å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ create_factors.py
â”‚   â”œâ”€â”€ list_factors.py
â”‚   â””â”€â”€ cleanup_useless_files.sh
â”‚
â”œâ”€â”€ ğŸ“ tests/ (3 files)            æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_all_factors_simple.py
â”‚   â”œâ”€â”€ test_amount_factor.py
â”‚   â””â”€â”€ test_single_factor.py
â”‚
â”œâ”€â”€ ğŸ“ docs/ (6 files)             æ–‡æ¡£
â”‚   â”œâ”€â”€ OPTIMIZATION_REPORT.md
â”‚   â”œâ”€â”€ QUICK_START_GUIDE.md
â”‚   â”œâ”€â”€ COMPARISON_SUMMARY.md
â”‚   â”œâ”€â”€ BACKTEST_README.md
â”‚   â”œâ”€â”€ README_model_train.md
â”‚   â””â”€â”€ CLEANUP_PLAN.md
â”‚
â”œâ”€â”€ ğŸ“ archive/ (5 files)          å­˜æ¡£
â”‚   â”œâ”€â”€ model_train.py             æ—§ç‰ˆè®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ compare_leakage_fix.py     å¯¹æ¯”è„šæœ¬
â”‚   â”œâ”€â”€ test_factor.py             æ—§æµ‹è¯•
â”‚   â”œâ”€â”€ test_factors.py            æ—§æµ‹è¯•
â”‚   â””â”€â”€ chenhan_factor_test.py     æ—§æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ“¦ quant_lib/                  âœ… å®Œå…¨æœªåŠ¨
â””â”€â”€ ğŸ’¾ data/                       âœ… å®Œå…¨æœªåŠ¨

âœ… æ”¹è¿›ï¼š
- æ¸…æ™°çš„ç›®å½•ç»“æ„
- åŠŸèƒ½åˆ†ç±»æ˜ç¡®
- ä¸»READMEå®Œæ•´
- æ–‡æ¡£é›†ä¸­ç®¡ç†
- æ—§æ–‡ä»¶å®‰å…¨å­˜æ¡£
```

---

## ğŸ“‹ è¯¦ç»†æ”¹åŠ¨åˆ—è¡¨

### âœ… ä¿ç•™åœ¨æ ¹ç›®å½•ï¼ˆæ ¸å¿ƒè„šæœ¬ï¼‰

| æ–‡ä»¶ | å¤§å° | è¯´æ˜ |
|------|------|------|
| `README.md` | 7.2K | â­ æ–°å»ºä¸»æ–‡æ¡£ |
| `model_train_optimized.py` | 39K | ä¸»è®­ç»ƒè„šæœ¬ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ |
| `backtest_strategy.py` | 16K | ç­–ç•¥å›æµ‹ |
| `rolling_backtest.py` | 11K | æ»šåŠ¨å›æµ‹ |
| `numexpr.py` | 367B | numpy 2.xå…¼å®¹æ€§ |

### ğŸ“ ç§»åŠ¨åˆ° scripts/ï¼ˆå·¥å…·è„šæœ¬ï¼‰

| æ–‡ä»¶ | å¤§å° | ç”¨é€” |
|------|------|------|
| `create_factors.py` | 4.7K | åˆ›å»ºå› å­æ¨¡æ¿ |
| `list_factors.py` | 1.6K | åˆ—å‡ºå¯ç”¨å› å­ |
| `cleanup_useless_files.sh` | 2.0K | æ¸…ç†ç¼“å­˜æ–‡ä»¶ |

### ğŸ“ ç§»åŠ¨åˆ° tests/ï¼ˆæµ‹è¯•æ–‡ä»¶ï¼‰

| æ–‡ä»¶ | å¤§å° | ç”¨é€” |
|------|------|------|
| `test_all_factors_simple.py` | 1.7K | æµ‹è¯•æ‰€æœ‰å› å­ |
| `test_single_factor.py` | 1.3K | æµ‹è¯•å•ä¸ªå› å­ |
| `test_amount_factor.py` | 1.3K | æµ‹è¯•amountå­—æ®µå› å­ |

### ğŸ“ ç§»åŠ¨åˆ° docs/ï¼ˆæ–‡æ¡£ï¼‰

| æ–‡ä»¶ | å¤§å° | å†…å®¹ |
|------|------|------|
| `OPTIMIZATION_REPORT.md` | 12K | ä¼˜åŒ–æŠ€æœ¯æŠ¥å‘Š |
| `QUICK_START_GUIDE.md` | 7.4K | å¿«é€Ÿå…¥é—¨æŒ‡å— |
| `COMPARISON_SUMMARY.md` | 9.9K | ä¼˜åŒ–å‰åå¯¹æ¯” |
| `BACKTEST_README.md` | 8.0K | å›æµ‹æ–‡æ¡£ |
| `README_model_train.md` | 2.6K | è®­ç»ƒæ–‡æ¡£ |
| `CLEANUP_PLAN.md` | 3.2K | æ•´ç†è®¡åˆ’ |

### ğŸ“ ç§»åŠ¨åˆ° archive/ï¼ˆå­˜æ¡£æ—§æ–‡ä»¶ï¼‰

| æ–‡ä»¶ | å¤§å° | åŸå›  |
|------|------|------|
| `model_train.py` | 33K | è¢«ä¼˜åŒ–ç‰ˆæ›¿ä»£ |
| `compare_leakage_fix.py` | 9.0K | å¯¹æ¯”è„šæœ¬ï¼Œä»»åŠ¡å®Œæˆ |
| `test_factor.py` | 1.2K | ä¸test_single_factor.pyé‡å¤ |
| `test_factors.py` | 1.2K | æ—§ç‰ˆæµ‹è¯•ï¼Œå¯¼å…¥è¿‡æ—¶ |
| `chenhan_factor_test.py` | 702B | ç®€å•æµ‹è¯•ï¼ŒåŠŸèƒ½é‡å¤ |

### ğŸ”’ å®Œå…¨æœªåŠ¨

- âœ… `quant_lib/` - æ ¸å¿ƒå› å­åº“
- âœ… `data/` - æ•°æ®æ–‡ä»¶
- âœ… `.git/` - Gitä»“åº“
- âœ… `runs/` - è®­ç»ƒç»“æœ
- âœ… `models/` - æ¨¡å‹æ–‡ä»¶
- âœ… `artifacts/` - æ„å»ºäº§ç‰©

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### æ–‡ä»¶æ•°é‡

| ç±»åˆ« | Before | After | å˜åŒ– |
|------|--------|-------|------|
| **æ ¹ç›®å½•Pythonæ–‡ä»¶** | 14 | 4 | -71% â¬‡ï¸ |
| **æ ¹ç›®å½•Markdown** | 5 | 1 | -80% â¬‡ï¸ |
| **scripts/** | 0 | 3 | +3 â¬†ï¸ |
| **tests/** | 0 | 3 | +3 â¬†ï¸ |
| **docs/** | 0 | 6 | +6 â¬†ï¸ |
| **archive/** | 0 | 5 | +5 â¬†ï¸ |

### ç£ç›˜ç©ºé—´

| é¡¹ç›® | å¤§å° | è¯´æ˜ |
|------|------|------|
| **æ ¹ç›®å½•æ€»å¤§å°** | 74K | ä»…ä¿ç•™æ ¸å¿ƒè„šæœ¬ |
| **scripts/** | 8.3K | å·¥å…·è„šæœ¬ |
| **tests/** | 4.3K | æµ‹è¯•æ–‡ä»¶ |
| **docs/** | 47.5K | æ–‡æ¡£é›†åˆ |
| **archive/** | 45.1K | æ—§æ–‡ä»¶å­˜æ¡£ |

### ä»£ç è¡Œæ•°

| ç±»åˆ« | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| **æ´»è·ƒä»£ç ** | ~1,500è¡Œ | æ ¹ç›®å½• + scripts + tests |
| **å­˜æ¡£ä»£ç ** | ~1,000è¡Œ | archive/ |
| **æ–‡æ¡£** | ~1,200è¡Œ | docs/ |

---

## âœ… æ•´ç†æˆæœ

### 1. æ¸…æ™°çš„ç›®å½•ç»“æ„ âœ…

```
Before: 14ä¸ªPythonæ–‡ä»¶æ‚ä¹±å †æ”¾
After:  åˆ†ç±»åˆ°4ä¸ªå­ç›®å½•ï¼ˆscripts, tests, docs, archiveï¼‰
```

### 2. ç§»é™¤é‡å¤æ–‡ä»¶ âœ…

```
åˆ é™¤/å­˜æ¡£ï¼š
- test_factor.py (ä¸test_single_factor.pyé‡å¤)
- test_factors.py (è¿‡æ—¶)
- chenhan_factor_test.py (åŠŸèƒ½é‡å¤)
```

### 3. é›†ä¸­ç®¡ç†æ–‡æ¡£ âœ…

```
Before: 5ä¸ªMarkdownæ•£è½æ ¹ç›®å½•
After:  6ä¸ªMarkdowné›†ä¸­åœ¨docs/
```

### 4. ä¿æŠ¤æ ¸å¿ƒåº“ âœ…

```
quant_lib/ - å®Œå…¨æœªåŠ¨ âœ…
data/ - å®Œå…¨æœªåŠ¨ âœ…
numexpr.py - ä¿ç•™åœ¨æ ¹ç›®å½•ï¼ˆé‡è¦ï¼ï¼‰âœ…
```

### 5. æ–°å¢ä¸»æ–‡æ¡£ âœ…

```
README.md (7.2K) - å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£ â­
```

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### æŸ¥çœ‹é¡¹ç›®æ¦‚è§ˆ

```bash
# é˜…è¯»ä¸»README
cat README.md

# æˆ–åœ¨GitHub/ç¼–è¾‘å™¨ä¸­æ‰“å¼€
```

### å¿«é€Ÿå¼€å§‹

```bash
# 1. æŸ¥çœ‹å¿«é€Ÿå…¥é—¨æŒ‡å—
cat docs/QUICK_START_GUIDE.md

# 2. åˆ—å‡ºå¯ç”¨å› å­
python scripts/list_factors.py

# 3. è®­ç»ƒæ¨¡å‹
python model_train_optimized.py --n-jobs 4
```

### è¿è¡Œæµ‹è¯•

```bash
# æµ‹è¯•æ‰€æœ‰å› å­
cd tests
python test_all_factors_simple.py

# æµ‹è¯•å•ä¸ªå› å­
python test_single_factor.py
```

### æ¸…ç†ç¼“å­˜

```bash
# è¿è¡Œæ¸…ç†è„šæœ¬
bash scripts/cleanup_useless_files.sh
```

---

## ğŸ“ é‡è¦æé†’

### âš ï¸ archive/ æ–‡ä»¶å¤¹

- åŒ…å«æ—§ç‰ˆ/é‡å¤æ–‡ä»¶
- **å»ºè®®ä¿ç•™7å¤©ååˆ é™¤**ï¼ˆç¡®è®¤æ— é—®é¢˜ï¼‰
- å¦‚éœ€å›æ»šï¼Œå¯ä»è¿™é‡Œæ¢å¤

### âš ï¸ ä¸è¦ä¿®æ”¹

- `quant_lib/` - æ ¸å¿ƒå› å­åº“
- `data/` - æ•°æ®æ–‡ä»¶
- `numexpr.py` - numpyå…¼å®¹æ€§å±‚

### âœ… å¯ä»¥å®‰å…¨ä¿®æ”¹

- è®­ç»ƒå‚æ•°ï¼ˆ`model_train_optimized.py`ï¼‰
- å›æµ‹ç­–ç•¥ï¼ˆ`backtest_strategy.py`ï¼‰
- è‡ªå®šä¹‰å› å­ï¼ˆæ·»åŠ åˆ°`quant_lib/chenhan_factor.py`ï¼‰

---

## ğŸ”„ å›æ»šè®¡åˆ’

å¦‚æœéœ€è¦æ¢å¤æŸä¸ªæ–‡ä»¶ï¼š

```bash
# ä»archiveæ¢å¤
cp archive/model_train.py ./

# æˆ–ä½¿ç”¨Gitæ¢å¤
git checkout HEAD -- filename.py
```

---

## ğŸ“… å»ºè®®çš„åç»­ç»´æŠ¤

### æ¯å‘¨

1. âœ… è¿è¡Œæ¸…ç†è„šæœ¬
   ```bash
   bash scripts/cleanup_useless_files.sh
   ```

2. âœ… æ£€æŸ¥runs/ç›®å½•å¤§å°
   ```bash
   du -sh runs/
   ```

### æ¯æœˆ

1. âœ… æ¸…ç†æ—§çš„è¿è¡Œç»“æœ
   ```bash
   # ä¿ç•™æœ€è¿‘30å¤©
   find runs/ -type d -mtime +30 -exec rm -rf {} +
   ```

2. âœ… ç¡®è®¤archive/å¯ä»¥åˆ é™¤
   ```bash
   # 7å¤©åç¡®è®¤æ— è¯¯
   rm -rf archive/
   ```

### æ ¹æ®éœ€è¦

1. âœ… æ›´æ–°README.md
2. âœ… æ·»åŠ æ–°æ–‡æ¡£åˆ°docs/
3. âœ… åˆ›å»ºæ–°æµ‹è¯•åˆ°tests/

---

## âœ¨ æ€»ç»“

### æ•´ç†å‰çš„é—®é¢˜ï¼š

- âŒ 14ä¸ªPythonæ–‡ä»¶æ··ä¹±å †æ”¾
- âŒ æ–‡æ¡£æ•£è½å„å¤„
- âŒ æ²¡æœ‰ä¸»README
- âŒ é‡å¤æ–‡ä»¶æœªæ¸…ç†
- âŒ æ— æ˜ç¡®çš„ç›®å½•ç»“æ„

### æ•´ç†åçš„æ”¹è¿›ï¼š

- âœ… **æ¸…æ™°çš„4çº§ç›®å½•ç»“æ„**ï¼ˆscripts, tests, docs, archiveï¼‰
- âœ… **åŠŸèƒ½åˆ†ç±»æ˜ç¡®**ï¼ˆæ ¸å¿ƒè„šæœ¬ã€å·¥å…·ã€æµ‹è¯•ã€æ–‡æ¡£ï¼‰
- âœ… **å®Œæ•´çš„ä¸»README**ï¼ˆ7.2Kï¼ŒåŒ…å«æ‰€æœ‰ä¿¡æ¯ï¼‰
- âœ… **æ–‡æ¡£é›†ä¸­ç®¡ç†**ï¼ˆ6ä¸ªæ–‡æ¡£åœ¨docs/ï¼‰
- âœ… **æ—§æ–‡ä»¶å®‰å…¨å­˜æ¡£**ï¼ˆ5ä¸ªæ–‡ä»¶åœ¨archive/ï¼‰
- âœ… **æ ¸å¿ƒåº“å®Œå…¨ä¿æŠ¤**ï¼ˆquant_libæœªåŠ¨ï¼‰

### æ•ˆæœï¼š

- ğŸ“‰ æ ¹ç›®å½•æ–‡ä»¶æ•°ï¼š**-75%**ï¼ˆ19 â†’ 5ï¼‰
- ğŸ“ˆ å¯ç»´æŠ¤æ€§ï¼š**æ˜¾è‘—æå‡**
- ğŸ“ˆ å¯è¯»æ€§ï¼š**å¤§å¹…æ”¹å–„**
- ğŸš€ ä¸Šæ‰‹é€Ÿåº¦ï¼š**2-3å€æå‡**

---

## ğŸ‰ æ•´ç†å®Œæˆï¼

ç°åœ¨SMQFé¡¹ç›®æ‹¥æœ‰äº†ï¼š

1. âœ… **æ¸…æ™°çš„ç›®å½•ç»“æ„** - ä¸€ç›®äº†ç„¶
2. âœ… **å®Œæ•´çš„æ–‡æ¡£** - README + 6ä¸ªè¯¦ç»†æ–‡æ¡£
3. âœ… **å®‰å…¨çš„å­˜æ¡£** - æ—§æ–‡ä»¶å¯è¿½æº¯
4. âœ… **ä¿æŠ¤çš„æ ¸å¿ƒ** - quant_libå®Œå…¨æœªåŠ¨
5. âœ… **ä¸“ä¸šçš„ç»„ç»‡** - ç¬¦åˆæœ€ä½³å®è·µ

**é¡¹ç›®ç°åœ¨æ›´æ•´æ´ã€æ›´ä¸“ä¸šã€æ›´æ˜“ç»´æŠ¤ï¼** ğŸš€

---

*æ•´ç†å®Œæˆæ—¶é—´: 2025-11-25 13:10*
*ä¸‹æ¬¡æ•´ç†å»ºè®®: 2025-12-02ï¼ˆ7å¤©åç¡®è®¤archiveå¯åˆ é™¤ï¼‰*
